<div class="responses-container">
  <div class="responses-header">
    <h1>Respostas dos Formul√°rios</h1>
    <div class="header-stats">
      <div class="stat-card">
        <span class="stat-number">{{ formularios.length }}</span>
        <span class="stat-label">Formul√°rios</span>
      </div>
      <div class="stat-card">
        <span class="stat-number">{{ respostas.length }}</span>
        <span class="stat-label">Respostas</span>
      </div>
    </div>
  </div>

  <!-- Loading state -->
  @if(loading){
  <div class="loading-container">
    <div class="loading-spinner"></div>
    <p>Carregando respostas...</p>
  </div>
  }

  <!-- Estado vazio -->
  @if(!loading && respostas.length === 0){
  <div class="empty-state">
    <div class="empty-icon">üìä</div>
    <h2>Nenhuma resposta encontrada</h2>
    <p>As respostas dos formul√°rios aparecer√£o aqui quando algu√©m responder</p>
  </div>
  }

  <!-- Tabela de respostas -->
  @if(!loading && respostas.length > 0){
  <div class="responses-table-container">
    <table class="responses-table">
      <thead>
        <tr>
          <th>Formul√°rio</th>
          <th>Participante</th>
          <th>Email</th>
          <th>Data da Resposta</th>
          <th>A√ß√µes</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let resposta of respostas"
            class="response-row">
          <td class="form-title">
            <strong>{{ resposta.formularioTitulo }}</strong>
          </td>
          <td class="participant-name">
            {{ resposta.clienteNome }}
          </td>
          <td class="participant-email">
            {{ resposta.clienteEmail }}
          </td>
          <td class="response-date">
            {{ formatDate(resposta.dataResposta) }}
          </td>
          <td class="response-actions">
            <button class="view-btn"
                    (click)="viewResponse(resposta)">
              üëÅÔ∏è Ver Respostas
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  }

  <!-- Resumo por formul√°rio -->
  @if(!loading && formularios.length > 0){
  <div class="summary-section">
    <h2>Resumo por Formul√°rio</h2>
    <div class="summary-grid">
      <div *ngFor="let formId of getUniqueFormularios()"
           class="summary-card">
        <h3>{{ getFormularioTitle(formId) }}</h3>
        <div class="summary-stats">
          <span class="responses-count">{{ getResponsesCount(formId) }} respostas</span>
        </div>
      </div>
    </div>
  </div>
  }

  <!-- Modal de detalhes da resposta -->
  @if(showResponseModal){
  <div class="modal-overlay"
       (click)="closeModal()">
    <div class="modal-content response-modal"
         (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>Detalhes da Resposta</h2>
      </div>

      @if(selectedResposta && selectedFormulario){
      <div class="modal-body">
        <!-- Informa√ß√µes do participante -->
        <div class="participant-info">
          <h3>üë§ Informa√ß√µes do Participante</h3>
          <div class="info-grid">
            <div class="info-item">
              <strong>Nome:</strong> {{ selectedResposta.clienteNome }}
            </div>
            <div class="info-item">
              <strong>Email:</strong> {{ selectedResposta.clienteEmail }}
            </div>
            <div class="info-item">
              <strong>Data:</strong> {{ formatDate(selectedResposta.dataResposta) }}
            </div>
            <div class="info-item">
              <strong>Formul√°rio:</strong> {{ selectedResposta.formularioTitulo }}
            </div>
          </div>
        </div>

        <!-- Respostas detalhadas -->
        <div class="responses-detail">
          <h3>üí¨ Respostas</h3>
          <div class="responses-list">
            <div *ngFor="let perguntaId of selectedResposta.respostas | keyvalue"
                 class="response-item">
              <div class="question-title">
                {{ getQuestionTitle(+perguntaId.key) }}
              </div>
              <div class="response-value">
                {{ formatResponse(perguntaId.value, getQuestionType(+perguntaId.key)) }}
              </div>
            </div>
          </div>
        </div>
      </div>
      }

      <div class="modal-footer">
        <button class="primary-btn"
                (click)="closeModal()">
          Fechar
        </button>
      </div>
    </div>
  </div>
  }
</div>